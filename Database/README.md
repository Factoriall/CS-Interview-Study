# Database
- [데이터베이스](#데이터베이스)
- [트랜잭션](#트랜잭션)
- [DB 인덱스](#DB-인덱스)

## 데이터베이스
### 데이터베이스를 사용하는 이유
- 이전 파일 시스템으로 관리할 시 데이터 종속성, 중복성 및 무결성 문제
- 논리적으로 연관된 여러 개의 자료를 구조화시켜 검색 및 갱신을 용이, 자료의 중복을 낮춰 효율성을 높임

### 특징
1. 데이터 독립성
  + 물리적 독립성: DB 크기를 변환할 때 관련 프로그램을 수정할 필요 없음
  + 논리적 독립성: 논리적인 구조로 인해 다양한 응용 프로그램의 논리적 요구를 반영 가능
2. 데이터 무결성: 데이터 유효성 검사를 통해 잘못된 데이터가 발생하는 경우를 방지
3. 데이터 보안성: 인가된 사용자들만 DB 및 DB 내의 자원에 접근할 수 있도록 계정 관리 및 접근 권한 설정
4. 데이터 일관성: 연관 정보를 논리적 구조로 관리함으로써 어느 하나의 데이터만 변경했을 시 나올 수 있는 데이터 불일치성 배제
5. 데이터 중복 최소화: 데이터를 통합 관리함으로써 자료 중복 및 데이터 중복성 문제 해결

### 데이터베이스의 성능
- 디스크 I/O: 디스크 드라이브의 플래터(원판)을 돌려서 읽어야 할 데이터가 저장된 위치로 디스크 헤더를 이동시킨 다음 데이터를 읽는 것을 의미
- 걸리는 시간은 디스크 헤더를 움직여서 읽고 쓸 위치로 옮기는 단계에서 결정

![io](../image/database_io.png)

- 순차 I/O: 논리적, 믈리적 순서에 따라 차례로 노드가 연결되지 않아도 접근이 빠름
- 랜덤 I/O: 모든 블록을 차례로 접근

-> **DB 쿼리 튜닝**: 랜덤 I/O 요청 횟수를 최소화시키는 과정

## 트랜잭션
### 정의
- **데이터베이스의 상태를 변환**시키는 하나의 논리적 기능을 수행하기 위한 작업 단위 또는 한꺼번에 모두 수행되어야 할 일련의 연산들
  + DB 상태 변환 명령어: SELECT, INSERT, DELETE, UPDATE

### 특징
1. DB에서 병행 제어 및 회복 시 처리되는 작업의 논리적 단위
2. 사용자가 시스템에 대한 서비스를 요구할 시 시스템이 응답하기 위한 상태 변환 과정의 작업 단위
3. 명령어: Commit / Rollback

### ACID
1. Atomicity(원자성): 트랜잭션 연산은 DB에 모두 반영되던지 하나도 반영되지 않아야 하며, 트랜잭션 내의 명령 중 어느 하나라도 오류 발생 시 그전에 수행한 모든 명령이 취소되어야 한다.

2. Consistency(일관성): 트랜잭션 완료 시 언제나 일관성있는 DB 상태를 유지, 시스템이 가지는 고정 요소는 트랜잭션과 상관없이 유지

3. Isolation(고립성): 둘 이상의 트랜잭션이 동시에 병행 시 하나가 완료되기 전까지 다른 트랜잭션 연산에 끼어들 수 없음

4. Durability(지속성): 성공적으로 완료된 트랜잭션 결과는 시스템과 상관없이 영구적으로 반영되어야 한다.

### 트랜잭션 상태

![status](../image/database_transaction_status.png)

1. 활성(Active): 트랜잭션 실행 중 상태
2. 실패(Failed): 트랜잭션에 오류가 발생하여 중단된 상태
3. 부분 완료(Partially Comitted): 마지막 연산까지 실행되고 Commit 연산이 실행되기 직전의 상태
4. 철회(Aborted): 트랜잭션의 문제로 Rollback 연산을 한 상태
5. 완료(Committed): 트랜잭션이 성공적으로 수행되어 Commit이 실행된 상태

## DB 인덱스
